---
Date: 2025-12-23
tags:
  - type/summary
  - topic/cloud
  - type/notes
aliases:
  - docker
  - kubernetes
  - cloud-native
---
## Cloud Native
### 01. Container
- Technology for packaging an application along with its runtime dependencies.
	- the standardization from having dependencies included
###### Hypervisor vs. Container
- Hardware + Host OS + **Hypervisor** + VM := `[ GuestOS + Bin/Libs + App ]`
- Hardware + Host OS + **Container** Engine + **Container** := `[ Bin/Libs + App ]`
	- Container Engine의 역할
#### Container Engine
- 컨테이너를 관리하기 위한 API나 CLI 도구를 제공하는 소프트웨어
- e.g. Docker Engine, Podman
#### Container Runtime
- Manage the execution and lifecycle of containers within the Kubernetes environment to run containers effectively.
	- [Kubernetes - Container](https://kubernetes.io/docs/concepts/containers/)
	- Kubernetes supports container runtimes such as containerd, CRI-O, and any other implemenatation of the Kubernetes CRI(Container Runtime Interface).
## 02. Docker
- 애플리케이션과 실행 환경을 포함한 컨테이너를 관리 및 운영하는 오픈소스 가상화 플랫폼
- `Dockerfile` --- (Build) ---> `Docker Image` --- (Run) ---> Docker Container
#### Podman
- Docker와 달리 Kubernetes 직접 지원
- Docker와 CLI Command 거의 동일
- Daemonless
![[Pasted image 20251223225145.png]]
![[Pasted image 20251223225732.png]]
- 프로세스의 생성 및 관리 주체
	- Docker: Docker Client가 Docker Daeman(`dockerd`)에 REST API Request를 보냄.
	- Podman: `podman` CLI가 직접 Container와 Image 저장소 제어 - Daemonless
#### `Dockerfile`
```Dockerfile
FROM tomcat:9-jre8-alpine
WORKDIR /usr/local/tomcat
COPY server.xml ./conf
RUN rm -rf ./webapps/*
ARG JAR_FILE=*.war
COPY ${JAR_FILE} ./webapps/edu-msa-board-1.0.0.war

EXPOSE 28082
```
#### Docker CLI
- `docker version [options]`
- `docker login [options] [registry]`
- `docker build [options] [context]`
- `docker tag image [:tag] [target-name [:tag] ... ] [options]`
- `docker pull [options] source [source...]`
- `docker push [options] image [destination]`
- `docker run [options] image [command [arg...]]`
- `docker exec [options] container [command [arg...]]`
- `docker stop [options] container ...`
- `docker kill [options] [container ...]`
- `docker ps [options]`
- `docker rm [options] container`
### 03. Kubernetes
- A **Kubernetes cluster** consists of a **Control Plane** plus a **Set of Worker Nodes**
	- Every cluster needs at least one worker node in order to run Pods.
- **Control Plane**
	- The control plane manages the worker nodes and the Pods in the cluster.
- **Worker Node**
	- The worker node(s) host the Pods that are the components of the application workload.
![[Pasted image 20251223234549.png]]
#### Cluster Architecture
[Kubernetes - Cluster Architecture](https://kubernetes.io/docs/concepts/architecture/)
##### Control Plane Components
- make global decisions about the cluster, as well as detecting and responding to cluster events.
- 참고: [Kubernetes - Creating Highly Available clusters with kubeadm](Creating-Highly-Available-Clusters-with-kubeadm)
###### kube-apiserver
- exposes the kubernetes API.
- kube-apiserver is designed to scale horizontally
	- scales by deploying more instances.
###### etcd
- consistent and highly-available key value store
###### kube-scheduler
- Cluster 내부에 Master Node(서버) + Worker Node(서버)
	- 서버 여러 대
- namespaces `-n kube-system`
	- `kubectl get pod -n kube-system`
	- `kubectl get ns`
###### kube-controller-manager
- 파드들을 관리하는 각각의 컨트롤러를 제어하는 역할
###### cloud-controller-manager
- 컨트롤러들을 클라우드 서비스와 연결하여 관리
##### Node components
###### kubelet
- 모든 노드에서 실행되며 컨테이너 실행 및 지속적인 헬스 체크를 통해 마스터의 kube-api-server와 통신을 하는 에이전트
###### kube-proxy
- 클러스터 내부의 가상 네트워크를 설정하여 관리
### Kubernetes Resource
![[Pasted image 20260104180145.png]]
##### Pod
- 컨테이너가 직접 실행되는 장소
- 컨테이너를 돌리는 최소한의 단위
- 하나 이상의 컨테이너 그룹
- 컨테이너를 직접 관리하지 않고 Pod 단위로 관리 (ReplicaSet)
##### ReplicaSet
- 파드의 개수 유지 및 관리
- 실행되는 파드를 안정적으로 유지
##### Deployment
- Stateless 앱을 배포할 때 사용되는 가장 기본적인 컨트롤러
- 배포 시 롤링 업데이트
![[Pasted image 20260104180132.png]]
#### Services, Load Balancing, and Networking
###### Ingress
[Kubernetes - Ingress](https://kubernetes.io/docs/concepts/services-networking/ingress/)
![ingress-diagram](https://kubernetes.io/docs/images/ingress.svg)
- Make your HTTP (or HTTPS) network service available using a protocol-aware cofiguration mechanism
- lets you map traffic to different backends based on rules you define via the Kubernetes API.
- 클러스터 외부에서 클러스터 내부 파드에 접근
- 고정된 IP 주소 할당
- 파드 간의 로드 밸런싱 지원
- 하나 또는 여러 개의 포트 지원
###### Service
[Kubernetes - Service](https://kubernetes.io/docs/concepts/services-networking/service/)
- Expose an application running in your cluster behind a single outward-facing endpoint,
- even when the workload is split across multiple backends.
- 클러스터 외부로부터 클러스터 내부로 들어오는 네트워크 트래픽을 로드밸런싱
#### Workloads
[Kubernetes - Workloads](https://kubernetes.io/docs/concepts/workloads/)
###### Deployment
- goot fit for managing a **stateless** application workload on your cluster
- where any Pod in the Deployment is **interchangeable** and **can be replaced** if needed.
###### StatefulSet
- run one or more related Pods that **do track state** somehow.
- e.g. if your workload records data persistently,
	- run a StatefulSet that **matches each Pod with a PersistentVolume**
###### Job
- to define task that **runs to completion and then stop.**
###### CronJob
- to run **the same Job multiple times** according a schedule.
###### DaemonSet
- 클러스터 전체에 특정 파드를 실행할 때 사용하거나
- 특정 노드 또는 모든 노드에 항상 실행되어야 할 특정 파드들을 관리

#### Configuration
###### ConfigMap
[Kubernetes - ComfigMaps](https://kubernetes.io/docs/concepts/configuration/configmap/)
- an API object used to **store non-confidential data** in **key-value pairs**
	- like environment variables, command-like arguments, or configuration files in a volume
###### Secret
[Kubernetes - Secrets](https://kubernetes.io/docs/concepts/configuration/secret/)
- an object that contain a **small amount of sensitive data** such as a password, a token, or a key.
#### Storage
[Kubernetes - Persistent Volumes](https://kubernetes.io/docs/concepts/storage/persistent-volumes/)
###### PVC (Persistent Volume Claim)
- a request for storage by a user.
	- specific size and access modes
- allow a user to consume **abstract storage resources**
###### PV (Persistent Volume)
- a piece of storage in the cluster that has been **provisioned by an administrator**
- or **dynamically provisioned** using Storage Classes.
##### Lifecycle of a volume and claim
[Kubernetes - Lifecycle of a volume and claim](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#lifecycle-of-a-volume-and-claim)
![[Pasted image 20260104183011.png]]