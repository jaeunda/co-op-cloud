---
Date: 2025-12-30
tags:
  - topic/cloud
  - type/practice
aliases:
  - install-kpaas
---
###### 실습
1. K-PaaS 컨테이너 플랫폼 클러스터 설치
2. 컨테이너 플랫폼 포털 배포
3. Ingress-NGINX Controller에 네트워크 인터페이스와 Floating IP 연결
### K-PaaS 클러스터 설치
#### K-PaaS 컨테이너 플랫폼 클러스터 Deployment 다운로드
- [K-PaaS 컨테이너 플랫폼 클러스터 Deployment 다운로드](https://github.com/K-PaaS/container-platform/blob/master/install-guide/standalone/cp-cluster-install-single.md#2.3)
<img width="1871" height="312" alt="Pasted image 20251230105934" src="https://github.com/user-attachments/assets/cfbea78d-9542-43f3-9b61-729bdc136f1b" />

#### K-PaaS 컨테이너 플랫폼 클러스터 설치 준비
- 설치에 필요한 환경변수 정의
- 물리 인스턴스 - Kubernetes 역할 매핑
<img width="1946" height="442" alt="Pasted image 20251230110552" src="https://github.com/user-attachments/assets/f7e16b10-fc8f-4893-ba85-b0bdafffd260" />

- Control Plane 노드 수: 1
- 각 노드의 hostname, private IP
<img width="1556" height="487" alt="Pasted image 20251230111128" src="https://github.com/user-attachments/assets/62bd153a-0e56-4334-9cc2-99b83c09f94b" />

- Worker 노드 수: 3
- 각 노드의 hostname, private IP
<img width="1712" height="665" alt="Pasted image 20251230111141" src="https://github.com/user-attachments/assets/07055cca-1a8c-4d39-b2f2-e405ead2a175" />

- Storage 타입: `nfs`
- 각 노드의 hostname, private IP
#### K-PaaS 컨테이너 플랫폼 클러스터 설치 확인
<img width="2249" height="1091" alt="Pasted image 20251230113647" src="https://github.com/user-attachments/assets/94e6bc45-cb21-4f56-af54-b228265bf504" />

### 컨테이너 플랫폼 포털 배포
- [플랫폼 포털 배포](https://github.com/K-PaaS/container-platform/blob/master/install-guide/portal/cp-portal-standalone-guide.md)
- PaaS 사용자 인터페이스 설치
![[Pasted image 20251230115356.png]]
### Ingress-NGINX Controller 서비스 확인
<img width="1950" height="172" alt="Pasted image 20251230115440" src="https://github.com/user-attachments/assets/9c6e5c63-a657-4953-8862-3500e2a88958" />

- `ingeress-nginx-controller` external ip 확인
	- Service Type: `LoadBalancer`
	- External IP: `<none>` 
- Ingress Controller는 떴지만 외부 접근 IP가 아직 없으므로 Floating IP 수동으로 연결해야 함.
### 네트워크 인터페이스 생성
- 새로운 네트워크 인터페이스 생성
- 대상 인스턴스: `cluster1` (Control Plane)
- Ingress Controller는 결국 노드의 네트워크 인터페이스에 귀속됨
	- Control Plane에 인터페이스를 붙여 외부 트래픽의 진입점으로 사용
<img width="1078" height="680" alt="Pasted image 20251230115629" src="https://github.com/user-attachments/assets/85ccb2a3-f96e-4fc7-8c0e-1bae72dd75ca" />

- 네트워크 인터페이스 생성 - cluster1에 지정 - floating IP 붙이기
<img width="2140" height="1315" alt="Pasted image 20251230123914" src="https://github.com/user-attachments/assets/2cb43593-d579-4cdd-8d8e-571c7b88ad0c" />
<img width="1971" height="169" alt="Pasted image 20251230123953" src="https://github.com/user-attachments/assets/99f13651-ccff-4183-b1d4-217d01b6b9b7" />
<img width="1074" height="668" alt="Pasted image 20251230124101" src="https://github.com/user-attachments/assets/112f821e-0480-411e-ba35-51be4f44f296" />
<img width="1606" height="845" alt="Pasted image 20251230124322" src="https://github.com/user-attachments/assets/de51d23a-a5a0-47b9-b0b0-7f3daf07cfb7" />

- Floating IP 생성
- 생성한 네트워크 인터페이스와 연결
- Floating IP ↔ Private IP 매핑 확인
<img width="663" height="614" alt="Pasted image 20251230124416" src="https://github.com/user-attachments/assets/60077d7c-d62e-45d3-9d08-2b76ab495559" />

- Ingress-NGINX Controller에 Ingress 트래픽을 받을 수 있는 외부 접근 IP 부여
