---
Date: 2026-01-02
tags:
  - type/practice
  - topic/cloud
aliases:
  - install-kpaas
  - kubernetes
  - deployment
  - job
  - pipeline
---
# Spring Music 배포 실습
### Openbao 구성 및 동작 확인
<img width="1347" height="161" alt="Pasted image 20260102104121" src="https://github.com/user-attachments/assets/5cf98fc3-dabe-4d62-835d-5945c752c559" />

- openbao `Running`
<img width="1270" height="1000" alt="Pasted image 20260102104138" src="https://github.com/user-attachments/assets/9f1a334e-f27d-4b5b-912d-75dea86610e9" />

- 비밀 정보 관리 시스템
<img width="1534" height="158" alt="Pasted image 20260102104147" src="https://github.com/user-attachments/assets/c993d56a-4702-4b2a-b477-40ae012db558" />
<img width="2211" height="1372" alt="Pasted image 20260102104203" src="https://github.com/user-attachments/assets/64cead39-b75f-41a9-9fb8-008c7a27e0d1" />
<img width="2351" height="1305" alt="Pasted image 20260102104236" src="https://github.com/user-attachments/assets/d6e0e70e-202e-4006-bb0a-e853612eace9" />
<img width="1738" height="239" alt="Pasted image 20260102104310" src="https://github.com/user-attachments/assets/be8d9fbb-44f3-4d9a-8bf8-f199bc8c4a93" />

- `Error`상태인 openbao Pod는 삭제함.
<img width="1827" height="654" alt="Pasted image 20260102111912" src="https://github.com/user-attachments/assets/c795a06e-980e-4917-8544-673f0b04c68d" />

### spring music 애플리케이션 배포
#### `kubeconfig` 생성
<img width="2361" height="453" alt="Pasted image 20260102112406" src="https://github.com/user-attachments/assets/5d8ba0b5-e969-4137-88e6-dfa42412a555" />

- Control Plane 노드에서 생성된 `kubeconfig` 파일 사용
- 외부 도구 및 플랫폼이 해당 Kubernetes 클러스터에 접근할 수 있도록 설정
<img width="1857" height="794" alt="Pasted image 20260102112328" src="https://github.com/user-attachments/assets/0d493f18-1fe5-46f2-b02a-69f1856e5fda" />

- 파이프라인에서 `kubeconfig` 등록
- 지정된 Kubernetes 클러스터를 대상으로 명령을 실행하게 됨
<img width="1391" height="477" alt="Pasted image 20260102112349" src="https://github.com/user-attachments/assets/ce2ce981-1c79-40d2-99e5-d1b718041d94" />

#### 새로운 Pipeline 생성
<img width="1830" height="725" alt="Pasted image 20260102112659" src="https://github.com/user-attachments/assets/6e3c4d70-cf89-4056-a0b0-68ae21fb1207" />
<img width="1326" height="419" alt="Pasted image 20260102112726" src="https://github.com/user-attachments/assets/36f8b9db-9526-4f79-91c8-32a55d359aea" />
<img width="1634" height="491" alt="Pasted image 20260102112733" src="https://github.com/user-attachments/assets/49d51f84-75e2-455b-8c0b-5621ff5ffb5a" />

#### Job 생성
##### Job Type 1: Build Job
<img width="1315" height="609" alt="Pasted image 20260102112855" src="https://github.com/user-attachments/assets/1cc2b4d1-0fde-4f16-ac4e-bc65eba14315" />

- 애플리케이션 소스 코드를 기반으로 빌드 작업 수행
<img width="1176" height="772" alt="Pasted image 20260102113059" src="https://github.com/user-attachments/assets/ef0f1324-7c2d-420d-bd07-0d12c3c38948" />

- `openjdk:8-jdk-alpine`에서 에러가 발생하여 이미지 교체
<img width="1168" height="510" alt="Pasted image 20260102113124" src="https://github.com/user-attachments/assets/ce5038c1-2cb3-4166-b696-991639fec2ba" />
<img width="1426" height="552" alt="Pasted image 20260102113239" src="https://github.com/user-attachments/assets/5eaa549e-9b2b-42c5-a6bd-dc77ed5873dc" />

##### Job Type 2: Static Analysis Job
- 빌드된 소스 코드를 대상으로
- 정적 분석 도구를 이용해 코드 품질 검사
<img width="1661" height="867" alt="Pasted image 20260102113342" src="https://github.com/user-attachments/assets/577deef1-8dca-4f58-b5ac-df6351d429a0" />

##### Job Type 3: JUnit-Test Job
- 애플리케이션에 대한 단위(Unit) 테스트 수행
- 주요 로직이 의도한 대로 동작하는지 자동 검증
<img width="1596" height="704" alt="Pasted image 20260102113358" src="https://github.com/user-attachments/assets/1e82cb28-b50e-405f-b2b8-5dedd0d53237" />

##### Job Type 4: Deployment Job
- 테스트를 통과한 애플리케이션을 대상으로 이미지를 생성하고
- 컨테이너 레지스트리에 저장한 뒤
- Kubernetes 클러스터에 배포
<img width="1278" height="838" alt="Pasted image 20260102113700" src="https://github.com/user-attachments/assets/d72f3023-84e1-423a-bc4b-86b3e78df63a" />
<img width="1425" height="465" alt="Pasted image 20260102113706" src="https://github.com/user-attachments/assets/747ab155-504e-4acc-a318-532f636e8ab2" />

#### Deployment 배포 확인
###### Error: manifest for openjdk:8-jdk-alpine not found

<img width="1664" height="470" alt="Pasted image 20260102113719" src="https://github.com/user-attachments/assets/c00e479a-54e4-420c-96b7-40001f505cd5" />
<img width="1223" height="834" alt="Pasted image 20260102114027" src="https://github.com/user-attachments/assets/471318ca-59ec-4e13-8b3f-e05d1aca6003" />
<img width="1268" height="276" alt="Pasted image 20260102114119" src="https://github.com/user-attachments/assets/44fd31f0-bcb5-40e2-b4ca-80834d16af78" />

- openjdk -> amazon 이미지 교체
###### 배포 성공
<img width="1620" height="463" alt="Pasted image 20260102115007" src="https://github.com/user-attachments/assets/1c013a45-4691-4de4-b8dc-64f4aad5cde6" />
<img width="1222" height="824" alt="Pasted image 20260102115046" src="https://github.com/user-attachments/assets/88398b37-ed71-4eee-b428-3a544d017c30" />
<img width="1226" height="830" alt="Pasted image 20260102115101" src="https://github.com/user-attachments/assets/d72f5aaf-cc87-46dc-bfd0-84ba59adcdcd" />
<img width="1227" height="835" alt="Pasted image 20260102115112" src="https://github.com/user-attachments/assets/0db63df7-31d9-4a8b-8ecb-a6e1f626ea27" />
<img width="1236" height="856" alt="Pasted image 20260102115156" src="https://github.com/user-attachments/assets/b9939abc-349b-42bd-9c6a-118dc97b8480" />
<img width="1227" height="844" alt="Pasted image 20260102115258" src="https://github.com/user-attachments/assets/c60b0647-25c9-4cd7-bdd0-e72aa6b944dc" />
<img width="1507" height="273" alt="Pasted image 20260102115306" src="https://github.com/user-attachments/assets/a7040f2d-b16b-48c5-9089-869517f4a6b4" />
<img width="1225" height="850" alt="Pasted image 20260102115350" src="https://github.com/user-attachments/assets/044914e1-0412-4a86-b21e-0fce923eebe3" />
<img width="1758" height="632" alt="Pasted image 20260102115326" src="https://github.com/user-attachments/assets/19570713-3f3a-4924-af29-75afff3b3677" />

###### 애플리케이션 접속
- 기존 interface floating IP + spring music port num
- `http://133.186.xxx.xxx:31233/`
<img width="1838" height="858" alt="Pasted image 20260102115639" src="https://github.com/user-attachments/assets/f447dedb-f16e-44c1-a121-7d9a15ce09f1" />
<img width="1849" height="862" alt="Pasted image 20260102121648" src="https://github.com/user-attachments/assets/abf64d63-dfa1-4df6-9894-29967baf8a16" />
<img width="593" height="824" alt="Pasted image 20260102121702" src="https://github.com/user-attachments/assets/a1f4cf76-8ae2-41e4-aded-1077b274b2ef" />



**Deployment**

-[Kubernetes - Deployment](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/)
<img width="1830" height="860" alt="Pasted image 20260102121838" src="https://github.com/user-attachments/assets/8112456a-bb14-4d3e-9006-c7167b5d3612" />
<img width="1790" height="691" alt="Pasted image 20260102121914" src="https://github.com/user-attachments/assets/7ffbaa0a-0085-4000-a613-b07e2571343b" />
<img width="1165" height="879" alt="Pasted image 20260102122010" src="https://github.com/user-attachments/assets/9316f4f9-550d-4299-a9c7-bdb9a892abb1" />

**Service**
- [Kubernetes - Service/Choosing-your-own-port](https://kubernetes.io/docs/concepts/services-networking/service/#nodeport-custom-port)
<img width="1137" height="462" alt="Pasted image 20260102122209" src="https://github.com/user-attachments/assets/b5726327-ad97-4b60-ba52-6318d3234f2c" />
<img width="919" height="694" alt="Pasted image 20260102122730" src="https://github.com/user-attachments/assets/6d293665-8cad-4a53-94cd-4726eca1b008" />
<img width="1290" height="859" alt="Pasted image 20260102122757" src="https://github.com/user-attachments/assets/fed0b694-0622-4443-aaa0-80f3a31d0e62" />
<img width="1649" height="647" alt="Pasted image 20260102123009" src="https://github.com/user-attachments/assets/1f4df616-a5db-4e76-bdbf-e995d300dbf1" />

- `ImagePullBackOff`
    - Docker Image를 public으로 pull 하여 용량 제한 걸림
    - 일시적으로는 Worker Node에 Floating IP를 달면 해결
    - 시간 지나면 Running으로 바뀜

<img width="1639" height="359" alt="Pasted image 20260102123959" src="https://github.com/user-attachments/assets/c69b7f58-a7c6-4dd2-ae06-f77bb7dc44b7" />
